import { Meta, Canvas, Story, ArgsTable } from '@storybook/addon-docs';
import { withDesign } from 'storybook-addon-designs';
import { IconButton, Switch } from '@mui/material';
import ExpandMoreIcon from '@mui/icons-material/ExpandMore';
import dedent from 'ts-dedent';

import Button from '../Button';
import ListItem from '../ListItem';
import List from '../List';
import Box from '../Box';

export const argTypes = {
  headerText: {
    defaultValue: 'This is a header',
    control: {
      type: 'text',
    },
    table: {
      category: 'ListItem',
    },
  },
  description: {
    defaultValue: 'some optional description',
    control: {
      type: 'text',
    },
    table: {
      category: 'ListItem',
    },
  },
  divider: {
    control: { type: 'boolean' },
    defaultValue: true,
    table: {
      category: 'ListItem',
    },
  },
  isHeader: {
    control: { type: 'boolean' },
    defaultValue: true,
    description: 'If set to true, headerText will be bolded',
    table: {
      category: 'ListItem',
    },
  },
  children: {
    name: 'action type',
    control: 'select',
    table: {
      category: 'ListItem',
      type: { summary: 'ReactNode' },
    },
    description:
      'an optional argument that accepts a ReactNode, which will render an action',
    options: ['Button', 'Toggle', 'Expand', 'None'],
    mapping: {
      Button: <Button> Button </Button>,
      Toggle: <Switch />,
      Expand: (
        <IconButton>
          <ExpandMoreIcon />{' '}
        </IconButton>
      ),
    },
  },
};

<Meta
  title='Organism/List'
  component={List}
  argTypes={argTypes}
  subcomponents={ListItem}
/>

export const ListTemplate = (args) => {
  return (
    <Box width='900px'>
      <List {...args} />
    </Box>
  );
};

export const ListItemTemplate = (args) => <ListItem {...args} />;

export const listItems = [
  {
    headerText: 'This is the main text',
    description: 'you can add an optional description',
    isHeader: true,
    divider: true,
  },
  {
    headerText: 'These items have no primary action',
    divider: true,
  },
  {
    headerText:
      'Since this is the last child element, we can omit the divider prop',
  },
];

export const variantListItems = [
  {
    headerText: 'Payment Options On Invoices',
    description: 'Show or hide payment options for all of your customers',
    isHeader: true,
    divider: true,
    childNode: <Switch color='primary' />,
  },
  {
    headerText: 'Payments Account',
    divider: true,
    childNode: (
      <Button variant='primary' color='blue'>
        {' '}
        Edit Account{' '}
      </Button>
    ),
  },
  {
    headerText: 'Automated Payment Reminders',
    childNode: (
      <IconButton>
        {' '}
        <ExpandMoreIcon />{' '}
      </IconButton>
    ),
  },
];

# List

**DATE ADDED**: [Date] | **PROJECT**: [Project name with link to Notion, Figma, etc]

A `List` is a continuous, vertical group of text rows. They are composed of `List items`, which render
three possible (and optional) primary actions. A row without primary actions will just have text.

<br />

---

<br />

### Usage and examples

`ListItem` accepts several props. It has `headerText`, which takes in a string and represents the main content
in list item. Additionally, if the `isHeader` prop is set to true, the `headerText` will be bolded.
It also accepts an optional `description`(also a string), which is useful for providing more detail
to the main content. The primary actions are determined by the elements you pass in as `children` to `ListItem`.
Current primary action use cases are limited to `Button`, `Switch` (or `Toggle`), and `Expand`. If a child element
is not provided, the list item will just render a text row (see basic use case). Finally, the `divider` prop ensures that
the list item is separated if it is followed by a sibling element.

<br />

#### Default / Basic:

> A basic use case of `List` would comprise of `ListItems` with no primary actions.

<Canvas>
  <Story
    name='Basic'
    component={List}
    args={{
      children: listItems.map((item) => (
        <ListItem
          headerText={item.headerText}
          description={item.description}
          isHeader={item.isHeader}
          divider={item.divider}
        />
      )),
    }}
  >
    {ListTemplate.bind({})}
  </Story>
</Canvas>

#### with multiple list items

> Most likely, lists will have multiple `ListItem` children, each are customizeable.

<Canvas>
  <Story
    name='with multiple list items'
    component={List}
    args={{
      children: variantListItems.map((item) => (
        <ListItem
          headerText={item.headerText}
          description={item.description}
          isHeader={item.isHeader}
          divider={item.divider}
        >
          {item.childNode}
        </ListItem>
      )),
    }}
    parameters={{
      docs: {
        source: {
          code: dedent`
          <Button variant="primary" color="blue">
            Start Icon
          </Button>`,
          language: 'tsx',
        },
      },
    }}
  />
</Canvas>

<br />

---

<br />

### Playground

<Canvas>
  <Story
    name='Playground'
    args={{
      headerText: 'this is a header',
    }}
    component={List}
  >
    {ListTemplate.bind({})}
  </Story>
</Canvas>

<ArgsTable of={ListTemplate} story='Playground' />
